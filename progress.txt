# Tabs Implementation Progress

This file tracks learnings and progress across Ralph iterations.


## 2026-01-28
- Implemented tabs-cli capture/status/config with Unix socket requests, JSON protocol, and TOML config read/write.
- Added config key normalization + validation (https server_url, tabs_ api_key, port/log level bounds) and default config rendering.
- Build/test/vet required setting GOCACHE and GOMODCACHE to /tmp due to permission error writing to ~/.cache/go-build.
- Added tabs-daemon core (PID/lock files, unix socket server, graceful shutdown) with status/capture handlers and CLI auto-start/retry logic.
- Sandbox note: ~/.tabs is not writable here; run manual tests with `HOME=/tmp/tabs-home` to let daemon/CLI create pid/socket/log files.
- Implemented JSONL storage with daily session folders, per-session cursor state (hash/offset), and metadata extraction stored alongside cursor state.
- Added `tabs-cli install` to drop Claude Code hook scripts into `~/.claude/hooks/` and relaxed capture to infer `session_id` from hook payloads.
- Daemon now reads Claude Code transcript JSONL from `transcript_path`, converts messages/tool events into tabs events, and uses cursor offset/hash to avoid duplicates.
- Manual Claude Code hook testing not run here (no Claude environment); rely on build/vet/test checks.

## 2026-01-29
- Added local web API server (tabs-local + tabs-cli ui) with localhost-only bind and CSRF Origin/Host checks.
- Implemented JSONL session scanning for /api/sessions and /api/sessions/:id with metadata extraction and search filtering.
- Introduced internal/config package for shared config parsing/writing.
- Implemented embedded local UI (HTML/CSS/JS) in tabs-local for timeline, session detail, and settings views with musical styling and animations.
- Added session summary extraction from first user message plus recursive search matching across event data (tool names, file paths, cwd, content).

## 2026-01-29
- Implemented tabs-server with POST /api/sessions, API key auth (SHA256 hash match), normalization into sessions/messages/tools/tags, and uploaded_by from api_keys.user_id.
- Added migrations in /migrations and a tabs-server migrate command; optional MIGRATE_ON_START env runs migrations at boot.
- Pinned pgx to v5.7.4 to keep go 1.23 compatibility; go commands require GOCACHE/GOMODCACHE/GOPATH in /tmp and GOSUMDB=off in this sandbox.
- Manual smoke test: docker compose up -d, run tabs-server migrate, insert api_keys row, POST /api/sessions, verify rows, then docker compose down.

## 2026-01-29 (phase3-remote-ui)
- Implemented remote UI for tabs-server with embedded HTML/CSS/JS in internal/server/ui/.
- Added API endpoints: GET /api/sessions (list with filters), GET /api/sessions/:id (detail), GET /api/tags (tag cloud).
- Remote UI features: emerald accent color (#059669), tag cloud with counts, tag-based filtering with active tag pills, uploaded_by display on session cards.
- Codex created the structure but missed styles.css and app.js files; manually created them based on local UI patterns with remote-specific modifications.
- Fixed unused import error in remote_handlers.go (removed "errors" import).
- Playwright testing verified: timeline shows sessions from all users grouped by day, tag filtering works (clicking tag filters to matching sessions), search spans all sessions.
- Design follows spec: DM Serif Display + IBM Plex Sans typography, warm backgrounds, emerald accents for "shared" context differentiation from local amber UI.
